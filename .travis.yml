os: linux
dist: bionic
language: java
jdk:
- openjdk11
jobs:
  include:
  - stage: Test Pull Request
    script:
    - "./gradlew test build"
    if: type = pull_request
  - stage: Deploy to Production
    script:
    - "./.travis/deploy.sh"
    if: type = push AND branch = master
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
before_install:
- chmod +x gradlew
- chmod +x gradle/wrapper/gradle-wrapper.jar
addons:
  ssh_known_hosts:
  - 45.79.110.249
env:
  global:
    secure: e4zuspKopFqRCwfjL/SQUu3gSYaBJxRggg2CUcS9QwLQ0GMm9T75fxSbNUsIrgkbddQZpiWrr8wHn0hzqf1vU1gbHGqxPir2zIC+BvnjFgTMHoZevMYl4oS3ngpmgVC1xDZuEu8UGsJNvzcchNLv+l5PuwpG8+DPzC9s73cwWhqaSCe/x2HX55ivyB2mubeJZnbxlg7XonlVxo54HqS6+vlle/qGvqVWirgu37lndGJSFuPROjyA9Z4RpQzNFc8hK5n8S3TgghTsadxd947M7blQPU+Jj7qyQHJ3OiRuSOTRFKx43TTclgjbfaoRhbX188ls8sKTsjka85QgaUmvuUR/oJrIWjBXoQKYhMGNnCTgqmcrH+DgH3PNeZ+aP0uQb+O7XdxglG6aEZhJkj5jOQ7Wyjd3LmqvSEUbxl/sIL4dJLV1LZUVNzOC3b/t4oKFY6yzCjE7Z2hcRgaINNDPcOa9yTDYC9USjGrkxP0cfBBa71iSehIa5RwJU1/vWHQNDF/ZHWfYaDGtrqeX9uwZS+VaAt2HMBIpJLarbhGmXFPDXsEp1PfrCoqJcwT/M/eH6HOU+bpTyYHAoBiHX7lmuui55ZUstxKpoZfKsHQHtl4ctKQVY4vs3qtaXWOXvLxH3dH6pgYQ4FeNzbMzFmaBnU8AbXrmBmRPqQ4lzVaNpX4=
